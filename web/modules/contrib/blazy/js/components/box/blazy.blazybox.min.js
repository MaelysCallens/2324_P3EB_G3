!function(f,b,v){"use strict";var C,y,p,x,d="blazybox",s=d,g="iframe",t="is-bbox",e="."+d,o=e+":not(."+t+")",z=e+"__content",B="media__element",l=e+"__close",_="is-"+d+"--open",w=t+"--fh",$=t+"--fs",T="b-provider--",D="visually-hidden",E="aria-hidden",k=f.sanitizer,A=f.multimedia||!1,M={};function i(a){var e=b.blazyBox,i=f(a);e.el=a,e.$el=i,e.btnClose=i.find(l),i.on("click."+d,l,e.close,!0),i.addClass(t)}b.blazyBox={btnClose:null,el:null,$el:null,options:{hideCloseBtn:!1},open:function(a,e){var i,s=b.blazyBox,t=v.body,o=s.$el,l=function(a){var e=a;f.isObj(a)&&(e=a.el||a.element);return f.isElm(e)?e:null}(a),n=f.isElm(l)?f.parse(f.attr(l,"data-b-media data-media")):{},d=n.provider,r=n.irrational,c=n.token,h=o.find(z),m=f.windowSize(),u=e||{},a=M[c];f.isUnd(u.fs)&&(u.fs=!0,u.width=m.width,u.height=m.height),a||(a=b.theme("blazyBoxMedia",{el:l,dataset:n,options:u}),n={ADD_TAGS:[g],ADD_ATTR:["allow","allowfullscreen"]},a=k.sanitize(a,n),M[c]=a),o.removeClass(D).attr(E,!1),u.fs&&o.addClass($),o.removeClass(T+C),d&&o.addClass(T+d),h.innerHTML=a,e?(s.options=f.extend({},s.options,e),e=s.options,y=e.class||"",p=e.bodyClass||"",x=e.bodyClosingClass||"",y&&o.addClass(y),p&&f.removeClass(t,p),setTimeout(function(){p&&f.addClass(t,p)},301)):f.addClass(t,_),A&&A.pause(),o.removeClass(w),r&&o.addClass(w),o=f.find(h,".media"),f.isElm(o)&&b.attachBehaviors(o),setTimeout(function(){i=f.find(h,g),f.isElm(i)&&f.addClass(i,B)},101),s.check(),C=d},close:function(a){var e=b.blazyBox,i=v.body,s=e.$el;f.isUnd(a)||a.preventDefault();function t(){s.addClass(D).attr(E,!0).find(z).innerHTML=""}var o=!1,l=function(){x&&f.removeClass(i,x),y&&(s.removeClass(y),t()),s.off("transitionend",l),o=!0};f.removeClass(i,_),s.removeClass($),p&&f.removeClass(i,p),x?f.addClass(i,x):t(),s.on("transitionend",l),setTimeout(function(){!o&&s.hasClass(y)&&l()},1200),b.detachBehaviors(s[0])},check:function(){var a;this.options.hideCloseBtn&&(a=this.btnClose||this.$el.find(l),f.addClass(a,D))},attach:function(){var a=f.find(v.body,e);f.isElm(a)||f.append(v.body,b.theme("blazyBox"))},isOpened:function(){return!b.blazyBox.$el.hasClass(D)}},b.theme.blazyBox=function(){return f.template('<div class="$id visually-hidden" tabindex="-1" role="dialog" aria-hidden="true" aria-label="$id"><div class="$id__content"></div><button class="$id__close" data-role="none">&times;</button></div>',{id:d})},b.theme.blazyBoxMedia=function(a){var e=a.el,i=a.dataset||{},s=a.options||{},t=s.fs,o=f.attr(e,"data-oembed-url"),l=i.html,n=!0,a="";return l?(n=!1,i.encoded&&(l=atob(l)),a+=l):"image"===i.boxType&&(t=!0,s.width=i.width,s.height=i.height,l=f.image.alt(e,""),i=e.href,i=f.attr(e,"data-box-url",i,!0),a+='<img class="'+B+'" src="'+i+'" decoding="async" loading="eager" alt="'+l+'" />'),o&&!k.isDangerous("src",o)&&(a+='<iframe class="'+B+'" src="'+o+'" width="100%" height="100%" allowfullscreen></iframe>'),t&&s.width&&n&&(a='<div class="media media--ratio media--ratio--fluid" style="'+("padding-bottom: "+f.image.ratio(s)+"%; width:"+s.width+"px;")+'">'+a+"</div>"),'<div class="'+d+'__media">'+a+"</div>"},b.behaviors.blazyBox={attach:function(a){b.blazyBox.attach(),f.once(i,s,o,a)},detach:function(a,e,i){"unload"===i&&f.once.removeSafely(s,o,a)}}}(dBlazy,Drupal,this.document);
