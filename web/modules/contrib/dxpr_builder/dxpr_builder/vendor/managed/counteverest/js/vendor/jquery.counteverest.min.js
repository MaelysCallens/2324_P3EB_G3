!function(_){"use strict";var i="countEverest",t={day:1,month:1,year:2050,hour:0,minute:0,second:0,millisecond:0,timeZone:null,countUp:!1,currentDateTime:null,yearsWrapper:".ce-years",daysWrapper:".ce-days",hoursWrapper:".ce-hours",minutesWrapper:".ce-minutes",secondsWrapper:".ce-seconds",decisecondsWrapper:".ce-dseconds",millisecondsWrapper:".ce-mseconds",yearsLabelWrapper:".ce-years-label",daysLabelWrapper:".ce-days-label",hoursLabelWrapper:".ce-hours-label",minutesLabelWrapper:".ce-minutes-label",secondsLabelWrapper:".ce-seconds-label",decisecondsLabelWrapper:".ce-dseconds-label",millisecondsLabelWrapper:".ce-mseconds-label",singularLabels:!0,yearsLabel:"Years",yearLabel:"Year",daysLabel:"Days",dayLabel:"Day",hoursLabel:"Hours",hourLabel:"Hour",minutesLabel:"Minutes",minuteLabel:"Minute",secondsLabel:"Seconds",secondLabel:"Second",decisecondsLabel:"Deciseconds",decisecondLabel:"Decisecond",millisecondsLabel:"Milliseconds",millisecondLabel:"Millisecond",timeout:1e3,highspeedTimeout:4,leftHandZeros:!0,wrapDigits:!0,wrapDigitsTag:"span",yearInMilliseconds:31536e6,dayInMilliseconds:864e5,hourInMilliseconds:36e5,minuteInMilliseconds:6e4,secondInMilliseconds:1e3,decisecondInMilliseconds:100,onInit:null,beforeCalculation:null,afterCalculation:null,onChange:null,onComplete:null};function r(e,s){this.$element=e,this.settings=_.extend({},t,s),this._defaults=t,this._name=i,this._serverDate=null,this._javaScriptDate=null,this.currentDate=null,this.targetDate=null,this.years=null,this.days=null,this.hours=null,this.minutes=null,this.seconds=null,this.deciseconds=null,this.milliseconds=null,this.yearsLabel=null,this.daysLabel=null,this.hoursLabel=null,this.minutesLabel=null,this.secondsLabel=null,this.decisecondsLabel=null,this.millisecondsLabel=null,this._intervalId=null,this._wrapsExists={},this._oldValues={},this._changed=!1,this.init()}r.prototype={init:function(){var e=this,s=e.$element,t=e.settings;(0<_(s).find(t.decisecondsWrapper).length||0<_(s).find(t.millisecondsWrapper).length)&&(t.timeout=t.highspeedTimeout),null!=t.currentDateTime&&e.setCurrentDate(t.currentDateTime),_.isFunction(t.onInit)&&t.onInit.call(e),e._intervalId=setInterval(function(){e.calculate()},t.timeout),e.calculate()},calculate:function(){var e=this,s=e.settings,t=s.yearInMilliseconds,n=s.dayInMilliseconds,l=s.hourInMilliseconds,a=s.minuteInMilliseconds,i=s.secondInMilliseconds,r=s.decisecondInMilliseconds,o=!1;e._changed=!1,e.setTargetDate(new Date(s.year,s.month-1,s.day,s.hour,s.minute,s.second)),_.isFunction(s.beforeCalculation)&&s.beforeCalculation.call(e);var u=e.getCurrentDate(),c=e.getTargetDate(),d=u.getTime(),h=null===s.timeZone?0:(c.getTimezoneOffset()/60+s.timeZone)*s.hourInMilliseconds,m=c.getTime()-h-d,p=m;e.currentDate=u;var g=e.round(p/t);p%=t;var b=e.round(p/n);p%=n;var L=e.round(p/l);p%=l;var f=e.round(p/a);p%=a;var D=e.round(p/i),y=p%i,v=e.round(y/r);0==s.countUp?(g=e.naturalNum(g),b=e.naturalNum(b),L=e.naturalNum(L),f=e.naturalNum(f),D=e.naturalNum(D),y=e.naturalNum(y),v=e.naturalNum(v)):(g*=-1,b*=-1,L*=-1,f*=-1,D*=-1,y*=-1,v*=-1),e.years=g,e.days=b,e.hours=L,e.minutes=f,e.seconds=D,e.milliseconds=y,e.deciseconds=v,e.format(),e.output(),Math.floor(m/s.timeout)<=0&&0==s.countUp&&(o=!0,null==s.millisecondsWrapper&&null==s.decisecondsWrapper||(o=m<=0)),1==o&&(_.isFunction(s.onComplete)&&s.onComplete.call(e),clearInterval(e._intervalId)),_.isFunction(s.afterCalculation)&&s.afterCalculation.call(e)},format:function(){var e=this,s=e.settings,t=s.singularLabels,n=e.years,l=e.days,a=e.hours,i=e.minutes,r=e.seconds,o=e.deciseconds,u=e.milliseconds,c=s.yearLabel,d=s.dayLabel,h=s.hourLabel,m=s.minuteLabel,p=s.secondLabel,g=s.decisecondLabel,b=s.millisecondsLabel;1==s.leftHandZeros&&(e.years=e.strPad(n,1),e.days=e.strPad(l,2),e.hours=e.strPad(a,2),e.minutes=e.strPad(i,2),e.seconds=e.strPad(r,2),e.milliseconds=e.strPad(u,3)),e.yearsLabel=1==n&&null!==c&&1==t?c:s.yearsLabel,e.daysLabel=1==l&&null!==d&&1==t?d:s.daysLabel,e.hoursLabel=1==a&&null!==h&&1==t?h:s.hoursLabel,e.minutesLabel=1==i&&null!==m&&1==t?m:s.minutesLabel,e.secondsLabel=1==r&&null!==p&&1==t?p:s.secondsLabel,e.decisecondsLabel=1==o&&null!==g&&1==t?g:s.decisecondsLabel,e.millisecondsLabel=1==u&&null!==b&&1==t?b:s.millisecondsLabel},output:function(){var e=this,s=e.settings;e.writeLabelToDom(s.yearsLabelWrapper,e.yearsLabel),e.writeLabelToDom(s.daysLabelWrapper,e.daysLabel),e.writeLabelToDom(s.hoursLabelWrapper,e.hoursLabel),e.writeLabelToDom(s.minutesLabelWrapper,e.minutesLabel),e.writeLabelToDom(s.secondsLabelWrapper,e.secondsLabel),e.writeLabelToDom(s.decisecondsLabelWrapper,e.decisecondsLabel),e.writeLabelToDom(s.millisecondsLabelWrapper,e.millisecondsLabel),e.writeDigitsToDom(s.yearsWrapper,e.years,"ce-years-digit"),e.writeDigitsToDom(s.daysWrapper,e.days,"ce-days-digit"),e.writeDigitsToDom(s.hoursWrapper,e.hours,"ce-hours-digit"),e.writeDigitsToDom(s.minutesWrapper,e.minutes,"ce-minutes-digit"),e.writeDigitsToDom(s.secondsWrapper,e.seconds,"ce-seconds-digit"),e.writeDigitsToDom(s.decisecondsWrapper,e.deciseconds,"ce-dseconds-digit"),e.writeDigitsToDom(s.millisecondsWrapper,e.milliseconds,"ce-mseconds-digit"),_.isFunction(s.onChange)&&1==e._changed&&s.onChange.call(e)},pause:function(){var e=this._intervalId;e&&clearInterval(e)},resume:function(){var e=this,s=e.settings;e._intervalId=setInterval(function(){e.calculate()},s.timeout)},destroy:function(){var e=this._intervalId;e&&clearInterval(e)},getOption:function(e){return this.settings[e]},setOption:function(e,s){this.settings[e]=s,"currentDateTime"==e&&this.setCurrentDate(s)},setTargetDate:function(e){this.targetDate=e},getTargetDate:function(){return this.targetDate},setCurrentDate:function(e){this._serverDate=new Date(e),this._javaScriptDate=new Date},getCurrentDate:function(){var e,s;return null!=this.settings.currentDateTime?(e=this._serverDate-this._javaScriptDate,s=(new Date).getTime(),new Date(s+e)):new Date},round:function(e){return 0==this.settings.countUp?Math.floor(e):Math.ceil(e)},naturalNum:function(e){return e<0?0:e},strPad:function(e,s,t){var n=e.toString();for(t||(t="0");n.length<s;)n=t+n;return n},writeLabelToDom:function(e,s){var t=this,n=_(t.$element);null==t._wrapsExists[e]&&(t._wrapsExists[e]=0<n.find(e).length),t._oldValues[e]!=s&&t._wrapsExists[e]&&(t._oldValues[e]=s,n.find(e).text(s),t._changed=!0)},writeDigitsToDom:function(e,s,t){var n,l,a=this,i=a.settings,r=i.wrapDigitsTag,o=_(a.$element).find(e),u=(s=s.toString(),[]);if(null==a._wrapsExists[e]&&(a._wrapsExists[e]=0<o.length),0==a._wrapsExists[e])return!1;if(1==i.wrapDigits)for(var c=0;c<s.length;c++)u[c]=s[c];else u[0]=s;if(void 0===a._oldValues[e]&&(a._oldValues[e]=[]),a._oldValues[e].length>u.length){l=a._oldValues[e].length-u.length,(n=o.find(r)).slice(0,l).remove(),n=o.find(r);for(c=0;c<u.length;c++)n.eq(c).text(u[c]);a._changed=!0}if(a._oldValues[e].length<u.length){if(0==i.wrapDigits)o.text(u[0]);else{0==a._oldValues[e].length&&o.text("");var d="";for(c=0;c<u.length;c++)c<(l=u.length-a._oldValues[e].length)?d+="<"+r+' class="'+t+'">'+u[c]+"</"+r+">":(n=o.find(r)).eq(c-l).text(u[c]);o.prepend(d)}a._changed=!0}if(a._oldValues[e].length==u.length)if(0==i.wrapDigits)a._oldValues[e][0]!=u[0]&&(o.text(u[0]),a._changed=!0);else for(c=0;c<u.length;c++)a._oldValues[e][c]!=u[c]&&((n=o.find(r)).eq(c).text(u[c]),a._changed=!0);a._oldValues[e]=[];for(c=0;c<u.length;c++)a._oldValues[e][c]=u[c]}},_.fn[i]=function(t,n,l){var a=null,e=this.each(function(){var e=null;if(_.data(this,i)){if(e=_.data(this,i),"destroy"===t)return e.destroy(),void _.data(this,i,null);var s=e[t];return"function"==typeof s&&(a=s.call(e,n,l)),!1}e=new r(this,t),_.data(this,i,e)});return a||e}}(jQuery,window,document);