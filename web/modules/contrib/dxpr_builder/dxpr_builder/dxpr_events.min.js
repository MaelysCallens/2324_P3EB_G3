const getDisplayText=function(e){return e[0].toLowerCase()+e.slice(1,e.length).replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`))},domElementIdentifier=function(e){const t=e.id&&`#${e.id}`||"",r=e.classList.length?`.${[...e.classList].join(".")}`:"";return`${e.tagName.toLowerCase()}${t}${r}`},domElementAbsolutePath=function(e,t=0,r=!0,s){if(s=s??["HTML","BODY"],!e||s.includes(e.tagName))return[];if(e.classList.contains("az-element")&&e.classList.contains("az-container"))return[domElementIdentifier(e)];const n=domElementIdentifier(e);return r&&t+n.length>1024?[]:e.parentNode?domElementAbsolutePath(e.parentNode,t+n.length).concat(n):[]},typeDecoder=function(e){const t=(e.dataset.azElement??e.dataset.azb).split("-");let r={element:"CMS Element"};return"az_block"===t[0]?(r={...r,cmsElementType:"block"},r={...r,blockName:e.dataset.azHumanReadable},r={...r,blockId:t[1]}):"az_view"===t[0]?(r={...r,cmsElementType:"view"},r={...r,viewName:e.dataset.azHumanReadable},r={...r,viewId:t[1]},r={...r,viewDisplayId:t[2]}):r={...r,element:e.dataset.azHumanReadableEn},r},getEventPropertiesGroup=function(e,t=!1){let r=[];const s=!t||t instanceof Array?t:Object.keys(t),n=!t||t instanceof Array?e=>e:e=>t[e];if(null==e)return null;for(const[i,a]of Object.entries(e))t&&!s.includes(i)||(r=[...r,{name:n(i),value:a}]);return r},required=function(e){throw new Error(`'${e}' is required`)},registerGlobalRageClickingEvent=()=>{let e=0,t=0,r=0;document.addEventListener("click",(function(){e++,e>5&&(e=0)})),document.addEventListener("click",(function(s){const n=Math.floor(Date.now());n-t<500&&n-r&&e>=5&&function(e){analytics.track(new RageClicking(e))}(s),r=t,t=n}))},registerGlobalMouseShakingEvent=()=>{let e=null,t=null,r=0,s=0,n=null;const i=e=>{let n=Math.sign(e.movementX);s+=Math.abs(e.movementX)+Math.abs(e.movementY),n!==t&&(t=n,r++)},a=e=>{n=e};setInterval((()=>{const t=s/470;if(!e)return void(e=t);r&&(t-e)/470>.0025&&analytics.track(new MouseShaking(n)),s=0,r=0,e=t}),470),document.addEventListener("mousemove",(e=>{i(e),a(e)}))};class DXPREvent{}class BaseEvent extends DXPREvent{NOT_APPLICAPLE="Not applicable";constructor(e,{properties:t=[],...r}={}){super(),this._domEvent=e,this._properties=["productVersion","url","domain","eventGroup","bootstrapVersion","localEmailHashed",...t],this._options=r,this.state=this.baseState}static ignoredEvents=[];static configure(e,{state:t,data:r={},propertiesDefinition:s={},propertiesOverride:n={},propertiesExclude:i=[],domEventDependantProperties:a=[]}){return e.baseEvent.state=t||e.baseEvent.baseState,e.baseEvent.data=r,e.baseEvent.propertiesExclude=i,e.baseEvent.domEventDependantProperties=a,BaseEvent.defineProperties(e.baseEvent,n),BaseEvent.defineProperties(e,s),e}static defineProperties(e,t){for(const r in t)e[r]=t[r];return e}static addProperties(e,t){for(const r of t)e.baseEvent.propertiesExclude.includes(r)||(e.property={name:r,value:e[r].call(e.baseEvent,e)});return e}static sanitize(e){const{baseEvent:t}=e;for(const[e,r]of Object.entries(t.state.properties))("string"==typeof r&&""===r||void 0===r)&&(t.state.properties[e]=t.NOT_APPLICAPLE);return e}static ignoreEvent(e){BaseEvent.ignoredEvents.push(e)}static isIgnored(e){return 0!==BaseEvent.ignoredEvents.length&&(e.state.event===BaseEvent.ignoredEvents[BaseEvent.ignoredEvents.length-1]&&(BaseEvent.ignoredEvents.pop(),!0))}static setOptions(e,{modeAppend:t=!0,state:r={},data:s={},propertiesDefinition:n={},propertiesOverride:i={},propertiesExclude:a=[],domEventDependantProperties:p=[]}){return e._options||(e._options={}),t?(e._options={state:{...e._options.state??{},...r},data:{...e._options.data??{},...s},propertiesDefinition:{...e._options.propertiesDefinition??{},...n},propertiesOverride:{...e._options.propertiesOverride??{},...i},propertiesExclude:[...e._options.propertiesExclude??[],...a],domEventDependantProperties:[...e._options.domEventDependantProperties??[],...p]},e):(e._options={state:r,data:s,propertiesDefinition:n,propertiesOverride:i,propertiesExclude:a,domEventDependantProperties:p},e)}get domEvent(){return this._domEvent}get baseEvent(){return this}get baseState(){return{event:"All Events",userId:this.userId,properties:{}}}get userId(){return drupalSettings.dxprBuilder.dxprUserInfo.local_email}get data(){return this._data??{}}set data({modeAppend:e=!0,...t}){this._data=e?{...this.data,...t}:t}get state(){return this._state}set state({modeAppend:e=!0,...t}){this._state=e?{...this.state,...t}:t}set property(e){if(e){e=e instanceof Array?e:[e];for(const{name:t,value:r}of e)"object"!=typeof r?this.state.properties[getDisplayText(t)]=r:this.property=r}}get propertiesExclude(){return this._propertiesExclude??[]}set propertiesExclude(e){this._propertiesExclude=[...this.propertiesExclude,...e]}get domEventDependantProperties(){return this._domEventDependantProperties??[]}set domEventDependantProperties(e){this._domEventDependantProperties=[...this.domEventDependantProperties,...e]}setup(){return BaseEvent.configure(this,this._options)}parse(){return!this.domEvent&&this.domEventDependantProperties.length&&(this.propertiesExclude=[...this.propertiesExclude,...this.domEventDependantProperties]),BaseEvent.addProperties(this,this._properties)}get(e){return this.state.properties[getDisplayText(e)]}eventGroup(e){return""}productVersion(e){return window.drupalSettings.dxprBuilder.dxprBuilderVersion}domain(e){return window.location.hostname}url(e){return window.location.href}bootstrapVersion(e){return bootstrapVersion()}localEmailHashed(e){return window.drupalSettings.dxprBuilder.dxprUserInfo.local_email_hashed}}class EventProperties extends DXPREvent{constructor(e){super(),this._event=e}get event(){return this._event}get baseEvent(){return this.event.baseEvent}get domEvent(){return this.baseEvent.domEvent}get data(){return this.baseEvent.data}get state(){return this.baseEvent.state}set property(e){this.baseEvent.property=e}get(e){return this.baseEvent.get(e)}setup(){return this.event.setup()}parse(){return this.event.parse()}}class TimerEventProperties extends EventProperties{get time(){return this.event.time}start(){this.event.start()}end(){this.event.end()}}class ClickEvent extends EventProperties{constructor(e,{properties:t=[],...r}={}){super(new BaseEvent(e)),this.options=r,this._properties=["elementPath","clickType","containerLanguage",...t]}set options({state:e={},propertiesDefinition:t={},propertiesOverride:{clickType:r=this.clickType,elementPath:s=this.elementPath,...n}={},domEventDependantProperties:i=[],...a}={}){this._options={state:{...this.defaultState,...e},propertiesDefinition:{clickType:r,elementPath:s,...t},propertiesOverride:n,domEventDependantProperties:["elementPath","clickType",...i],...a}}static undefinedClickHandler(e){analytics.track(new ClickEvent(e,{data:{container:this},properties:["classAttr","titleAttr"],domEventDependantProperties:["classAttr","titleAttr"],propertiesOverride:{eventGroup:e=>"Debugging"},propertiesDefinition:{classAttr:e=>e.domEvent.target.getAttribute("class")||"",titleAttr:e=>e.domEvent.target.title}}))}get defaultState(){return{event:"User Clicked"}}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}elementPath(e){return domElementAbsolutePath(e.domEvent.target).join(" ")}clickType(e){return e.domEvent.type}containerLanguage(e){try{return e.data.container.attrs.langcode}catch(e){return""}}}class ElementEvent extends EventProperties{constructor(e,{properties:t=[],...r}={}){super(new ClickEvent(e)),this._properties=["element","parentElement",...t],this.options=r}set options({state:e={},data:{container:t=required("data.container"),...r},propertiesDefinition:s={},propertiesOverride:{element:n=required("propertiesOverride.element"),parentElement:i=(e=>""),...a},propertiesExclude:p=[],...o}){this._options={data:{container:t,...r},state:{...this.defaultState,...e},propertiesDefinition:{element:n,parentElement:i,...s},propertiesOverride:{eventGroup:e=>"Elements",...a},propertiesExclude:["elementPath",...p],...o}}get defaultState(){return{event:"User Element Action"}}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}element(e){}parentElement(e){}}class AddedElementEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s,domEventDependantProperties:n=[],...i}={}){super(new ElementEvent(e,{state:{event:"User Added Element",...r},propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.domEvent.currentTarget)),parentElement:e=>domElementAbsolutePath(e.domEvent.target.parentElement).join(" "),...s},domEventDependantProperties:["element","parentElement",...n],...i})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class DeletedElementEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s,...n}={}){super(new ElementEvent(e,{state:{event:"User Deleted Element",...r},propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),parentElement:e=>e.data.dxprElement.parent.name,...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class ClonedElementEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s,...n}={}){super(new ElementEvent(e,{state:{event:"User Cloned Element",...r},propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),parentElement:e=>e.data.dxprElement.parent.name,...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class CancelElementSettingsEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s,...n}={}){super(new ElementEvent(e,{state:{event:"User Canceled Element Settings",...r},propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),parentElement:e=>e.data.dxprElement.parent.name,...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class SavedElementSettingsEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s={},...n}={}){super(new ElementEvent(e,{state:{event:"User Saved Element Settings",...r},propertiesExclude:["parentElement"],propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class ClickedElementHelpIcon extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s,...n}={}){super(new ElementEvent(e,{state:{event:"User Clicked Help Link On Element Modal",...r},propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),parentElement:e=>e.data.dxprElement.parent.name,...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class CopiedElementEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s={},...n}={}){super(new ElementEvent(e,{state:{event:"User Copied Element",...r},propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),parentElement:e=>e.data.dxprElement.parent.name,...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class OpenedElementSettingsEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s,...n}={}){super(new ElementEvent(e,{state:{event:"User Opened Element Settings Window",...r},propertiesExclude:["parentElement"],propertiesOverride:{element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class PastedElementEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s={},...n}={}){super(new ElementEvent(e,{state:{event:"User Pasted Element",...r},propertiesOverride:{element:e=>"CMS"===e.data.dxprElement.category?"CMS Element":e.data.dxprElement.name,parentElement:e=>e.data.dxprElement.parent.name,...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class SavedElementTemplateEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s={},...n}={}){super(new ElementEvent(e,{state:{event:"User Saved Element As Template",...r},propertiesOverride:{eventGroup:e=>"Reusability",element:e=>"CMS"===e.data.dxprElement.category?"CMS Element":e.data.dxprElement.name,parentElement:e=>e.data.dxprElement.parent?e.data.dxprElement.parent.name:"",...s},...n})),this._properties=[...t]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class LoadedElementTemplateEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s={},...n}={}){super(new ElementEvent(e,{state:{event:"User Loaded User Template",...r},propertiesOverride:{eventGroup:e=>"Reusability",element:e=>"CMS"===e.data.element.category?"CMS Element":e.data.element.name,parentElement:e=>e.data.targetElement.name,...s},...n})),this._properties=["templateName","templateOwnedByUser",...t],this._options={}}static addLoadedTemplateEventsListener(){let e=null;const t={resolve:null,reject:null};document.addEventListener("dxpr_template_selected",(function(r){e=new LoadedElementTemplateEvent(r,{data:{templateName:r.detail.name,templateOwnedByUser:r.detail.templateOwnedByUser,container:{}}}),new Promise(((e,r)=>{t.resolve=e,t.reject=r})).then((e=>{analytics.track(e)}))}));document.addEventListener("dxpr_template_added",(function(r){e&&(BaseEvent.setOptions(e.event,{data:{targetElement:r.detail.target,element:r.detail.template,container:r.detail.container}}),t.resolve(e))}))}templateOwnedByUser(e){return e.data.templateOwnedByUser}templateName(e){return e.data.templateName}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class ClickedElementSettingEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s={},...n}={}){super(new ElementEvent(e,{state:{event:"User Clicked Element Setting",...r},propertiesExclude:["parentElement"],propertiesOverride:{eventGroup:e=>"Elements",element:e=>getEventPropertiesGroup(typeDecoder(e.data.domElement),["element"]),...s},...n})),this._properties=["settingName","settingType","settingValue","settingValueLength","tabName",...t],this._options={},this.parameterBlacklistValues=["textfield","textarea","rawtext","html"]}setup(){return super.setup(),this}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}settingName(e){return e.data.parameter.heading}settingType(e){return e.data.parameter.type}settingValue(e){return e.parameterBlacklistValues.includes(e.data.parameter.type)?"":e.data.parameter.get_value()}settingValueLength(e){return e.data.parameter.get_value().length}tabName(e){return e.data.tabName}}class MaximumLocalStorageExceededEvent extends EventProperties{constructor(e={}){super(new BaseEvent(null,e)),this._options={state:{event:"User Reached Limit Of History Storage"},propertiesOverride:{eventGroup:e=>"Frustration"},...e},this._properties=[]}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class UndoRedoKeyboardShortcutEvent extends EventProperties{constructor(e,t={}){super(new BaseEvent(e,t)),this._options={state:{event:"User Used Undo / Redo Keyboard Shortcut"},propertiesOverride:{eventGroup:e=>"Experiments"},...t},this._properties=["keyCombination"]}keyCombination(e){return e.data.keyCombination}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class IconSearchEvent extends EventProperties{constructor(e,t={}){super(new BaseEvent(e,t)),this._properties=["searchQuery"],this._options={state:{event:"User Searched Icon"},propertiesOverride:{eventGroup:e=>"Core"},...t}}searchQuery(e){return e.domEvent.target.value}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class TimerEvent extends TimerEventProperties{constructor(e,{properties:t=[],...r}={}){super(new BaseEvent(e)),this.options=r,this._properties=[...t],this._startTime=0,this._endTime=0}set options({state:e={},...t}){this._options={state:{...this.defaultState,...e},...t}}get defaultState(){return{event:"Timer Event"}}get time(){return parseInt(this._endTime-this._startTime,10)}start(){this._startTime=performance.now()}end(){this._endTime=performance.now()}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class RenderedAllContainersEvent extends TimerEventProperties{constructor(e,{properties:t=[],...r}={}){super(new TimerEvent(e)),this._properties=["totalRenderTime","elementCount","elementsPerSecond",...t],this.options=r}set options({state:e={},...t}={}){this._options={state:{event:"User Rendered All Containers",...e},...t}}totalRenderTime(e){return e.time}elementCount(e){return e.data.document.getElementsByClassName("az-element").length}elementsPerSecond(e){return e.get("elementCount")/e.get("totalRenderTime")*1e3}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class DraggedAndDroppedElementEvent extends TimerEventProperties{constructor(e,{properties:t=[],...r}={}){super(new TimerEvent(e)),this._properties=["clickType","airtime","element","elementWidth","elementWidthPerc","elementHeight","elementHeightPerc","parentElement","dropTarget","dropTargetWidth","dropTargetWidthPerc","dropTargetHeight","dropTargetHeightPerc",...t],this.options=r}static addDragAndDropEventsListener(){let e=null;const t={resolve:null,reject:null};document.addEventListener("dxpr_start_sorting",(function(r){e=new DraggedAndDroppedElementEvent(r),e.start(),new Promise(((e,r)=>{t.resolve=e,t.reject=r})).then((e=>{analytics.track(e)}))}));document.addEventListener("dxpr_element_dropped",(function(r){e&&(BaseEvent.setOptions(e,{data:{element:r.detail.event.item,source:r.detail.event.from,target:r.detail.event.to}}),t.resolve(e))}));document.addEventListener("dxpr_end_sorting",(function(t){e&&e.end()}))}set options({state:e={},propertiesOverride:t={},...r}={}){this._options={state:{event:"User Dragged And Dropped Element",...e},propertiesOverride:{eventGroup:e=>"Elements",...t},...r}}clickType(e){return e.domEvent.type}airtime(e){return e.time}element(e){return getEventPropertiesGroup(typeDecoder(e.data.element))}elementWidth(e){return e.getDimension(e.data.element,"Width")}elementWidthPerc(e){return e.getDimensionPercentage(e.data.element,"Width")}elementHeight(e){return e.getDimension(e.data.element,"Height")}elementHeightPerc(e){return e.getDimensionPercentage(e.data.element,"Height")}parentElement(e){return getEventPropertiesGroup(typeDecoder(e.data.source),{element:"parentElement"})}dropTarget(e){return getEventPropertiesGroup(typeDecoder(e.getTarget(e.data)),{element:"dropTarget"})}dropTargetWidth(e){return e.getDimension(e.getTarget(e.data),"Width")}dropTargetWidthPerc(e){return e.getDimensionPercentage(e.getTarget(e.data),"Width")}dropTargetHeight(e){return e.getDimension(e.getTarget(e.data),"Height")}dropTargetHeightPerc(e){return e.getDimensionPercentage(e.getTarget(e.data),"Height")}getDimensionPercentage(e,t){return t=`${t.charAt(0).toUpperCase()}${t.slice(1)}`,Math.round(e[`offset${t}`]/window[`inner${t}`]*100)}getDimension(e,t){return e[`offset${t=`${t.charAt(0).toUpperCase()}${t.slice(1)}`}`]}getTarget(e){return e.target}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class ClientSideErrorEvent extends EventProperties{constructor(e,{properties:t=[],state:r={},propertiesOverride:s={},...n}={}){super(new BaseEvent(e)),this._options={state:{event:"User Experienced Console Error",...r},propertiesOverride:{eventGroup:e=>"Frustration"},...n},this._properties=["filename","errorType","implicatedProduct","message","stackTrace",...t]}static clientSideErrorHandler(e){return analytics.track(new ClientSideErrorEvent(e)),!1}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}filename(e){return e.domEvent.filename}errorType(e){return e.domEvent.error.name}implicatedProduct(e){return""}message(e){return e.domEvent.error.message}stackTrace(e){return e.domEvent.error.stack}}class ViewportResizeEvent extends EventProperties{constructor(e,{properties:t=[],...r}={}){super(new BaseEvent(e)),this.options=r,this._properties=["viewportHeight","viewportWidth",...t]}set options({state:e={},...t}){this._options={state:{...this.defaultState,...e},propertiesOverride:{eventGroup:e=>"Responsive Design"},...t}}get defaultState(){return{event:"User changed viewport size"}}viewportHeight(e){return e.data.viewportHeight}viewportWidth(e){return e.data.viewportWidth}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class KeyboardShortcutsEvent extends EventProperties{constructor(e,t={}){super(new BaseEvent(e,t)),this._options={state:{event:"User Used Keyboard Shortcut"},propertiesOverride:{eventGroup:e=>"Shortcut"},...t},this._properties=["shortcut"]}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}shortcut(e){let t;const{ctrlKey:r,metaKey:s,shiftKey:n,key:i,keyCode:a}=e.domEvent;return!r&&!s||"c"!==i&&"C"!==i?!r&&!s||"x"!==i&&"X"!==i?!r&&!s||"v"!==i&&"V"!==i?!(r&&n||s&&n)||"z"!==i&&"Z"!==i?!r&&!s||"z"!==i&&"Z"!==i?!r&&!s||"y"!==i&&"Y"!==i?!r&&!s||"s"!==i&&"S"!==i?"Escape"!==i&&27!==a||(t="Close (Modal) keyboard shortcut - Escape"):t="Save (Container) keyboard shortcut - ctrl/metaKey + S":t="Redo keyboard shortcut - ctrl/metaKey + Y":t="Undo keyboard shortcut - ctrl/metaKey + Z":t="Redo keyboard shortcut - shift+ctrl/cmd+shift + Z":t="Paste keyboard shortcut - ctrl/metaKey + V":t="Cut keyboard shortcut - ctrl/metaKey + X":t="Copy keyboard shortcut - ctrl/metaKey + C",t}}class RageClicking extends EventProperties{constructor(e,t={}){super(new BaseEvent(e,t)),this._properties=[],this._options={state:{event:"User Rage Clicked"},propertiesOverride:{eventGroup:e=>"Frustration"},...t}}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class MouseShaking extends EventProperties{constructor(e,t={}){super(new BaseEvent(e,t)),this._properties=[],this._options={state:{event:"User Shook Mouse"},propertiesOverride:{eventGroup:e=>"Frustration"},...t}}setup(){return super.setup(),BaseEvent.configure(this,this._options)}parse(){return super.parse(),BaseEvent.addProperties(this,this._properties)}}class DXPRAnalytics{constructor(){this.analyticsAccessToken=btoa("dzhGs9v8zXdI53Sg5jH88PHNrE98Mu5I:"),window.addEventListener("error",ClientSideErrorEvent.clientSideErrorHandler),document.addEventListener("dxpr_loaded",(e=>{DraggedAndDroppedElementEvent.addDragAndDropEventsListener(),LoadedElementTemplateEvent.addLoadedTemplateEventsListener()}))}static isEnabled(){try{if(!JSON.parse(`${drupalSettings.dxprBuilder.recordAnalytics}`.toLocaleLowerCase()))return!1}catch(e){return console.error("Unexpected value for the recordAnalytics settings"),!1}return!0}getAnalyticsAccessToken(){return this.analyticsAccessToken}track(e){if(e=BaseEvent.sanitize(e.setup().parse()),BaseEvent.isIgnored(e))return;if(!DXPRAnalytics.isEnabled())return;new DXPRAnalyticsTrackRequest(e).send()}identify(e){const t=new DXPRAnalyticsIdentifyRequest(e);DXPRAnalytics.isEnabled()&&t.send()}group(e){DXPRAnalytics.isEnabled()&&new DXPRAnalyticsGroupRequest(e).send()}}class DXPRAnalyticsTrackRequest{constructor(e){this.event=e,this.headers={Authorization:`Basic ${analytics.getAnalyticsAccessToken()}`,"Content-Type":"application/json",Accept:"*/*"}}send(){$.ajax({url:"https://api.segment.io/v1/track",data:JSON.stringify(this.event.state),method:"post",headers:this.headers})}}class DXPRAnalyticsIdentifyRequest{constructor(e){const{local_email:t,...r}=e.identity;this.user={userId:e.identity.local_email,traits:{...r,user_profile_active:!1}},e.profile&&(this.user.traits={...this.user.traits,user_profile_active:!0,user_profile_name:e.profile.local_username}),this.headers={Authorization:`Basic ${analytics.getAnalyticsAccessToken()}`,"Content-Type":"application/json",Accept:"*/*"}}send(){$.ajax({url:"https://api.segment.io/v1/identify",data:JSON.stringify(this.user),method:"post",headers:this.headers})}}class DXPRAnalyticsGroupRequest{constructor(e){this.group={userId:e.userId,groupId:e.groupId,traits:{group1_type:e.group1_type,group1_value:e.group1_value,localEmailHashed:drupalSettings.dxprBuilder.dxprUserInfo.local_email_hashed,...e.traits}},this.headers={Authorization:`Basic ${analytics.getAnalyticsAccessToken()}`,"Content-Type":"application/json",Accept:"*/*"}}send(){$.ajax({url:"https://api.segment.io/v1/group",data:JSON.stringify(this.group),method:"post",headers:this.headers})}}const analytics=new DXPRAnalytics;