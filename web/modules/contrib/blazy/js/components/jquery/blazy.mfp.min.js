!function(u,h,s){"use strict";var t,o,l,g=jQuery,a="b-mfp",i="data-mfp",m="is-"+a,r="["+i+"-gallery]:not(."+m+")",c="["+i+"-trigger]",d=h.blazy||{},v=u.sanitizer;function e(i){var e,f,p,n=u.findAll(i,c),a=(f=[],p=(e=n).length,u.each(e,function(i,e){var n,a=u.parse(u.attr(i,"data-b-media data-media")),t=i.nextElementSibling,o=t&&u.hasClass(t,"litebox__caption"),l=u.attr(i,"href"),s={el:g(i)},m=s.boxType=a.boxType,r="",c=a.width,d=!1;"image"===m?(n=l,s.type="image"):("html"in a?(d="video"===m,l=a.html,a.encoded&&(l=atob(l)),n=v.sanitize(l),s.type="inline"):"iframe"===m&&(d=!0,n=h.theme("blazyMedia",{el:i}),s.type="inline"),n&&(c&&d&&(r=' style="width:'+c+'px;"'),n='<div class="mfp-html mfp-html--'+m+'"'+r+'><div class="mfp-inner">'+n,o&&(n+='<div class="mfp-bottom-bar"><div class="mfp-title">'+v.sanitize(t.innerHTML)+'</div><div class="mfp-counter">'+(e+1)+"/"+p+"</div></div>"),n+="</div></div>")),n&&(s.src=n),o&&(s.title=v.sanitize(t.innerHTML)),f.push(s)}),f);u(i).magnificPopup({items:a,gallery:{enabled:1<n.length,navigateByImgClick:!0,tCounter:"%curr%/%total%"},preloader:!0,callbacks:{beforeClose:function(){var i=this.currItem;i&&i.inlineElement&&y(i.inlineElement[0])},change:function(){b(this,!0)},open:function(){var i=this.wrap;i&&i.length&&setTimeout(function(){u.addClass(i[0],"mfp-on"),d.load&&d.load(i[0])},100)}},mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(i){return b(this),g(t||i.data.el)}}}),u.on(i,"click",c,function(i){i=t=i.target;o=u.index(i,[".box",".grid",".field__item","li",".slide"]),setTimeout(function(){(l=u.magnificPopup.instance)&&l.goTo(o)})},!1),u.addClass(i,m)}function b(i,e){var n,a,t,o,l=i.content;return l&&l.length&&(a=l[0],t=u.find(a,"img"),(o=u.isElm(t))||(l=u.find(a,"video"),!u.isElm(l)||(l=u.attr(l,"poster"))&&((t=s.createElement("img")).decoding="async",t.src=l)),(o=u.isElm(t))&&(n=i.currItem.img=g(t),i.currItem.hasSize=o),e&&u.hasClass(a,"media media-wrapper mfp-html")&&y(a,!0)),n}function y(i,e){var n=u.hasClass(i,"media")?i:u.find(i,".media");u.isElm(n)&&(h.detachBehaviors(n),e&&setTimeout(function(){h.attachBehaviors(n),d&&d.load(n)}))}h.behaviors.blazyMagnificPopup={attach:function(i){var n;g&&u.isFun(g.fn.magnificPopup)&&!u.isFun(u.fn.magnificPopup)&&(n=g.fn.magnificPopup,u.fn.magnificPopup=function(i){var e=u(n.apply(this,arguments));return u.isUnd(u.magnificPopup)&&(u.magnificPopup=g.magnificPopup),e}),u.once(e,a,r,i)},detach:function(i,e,n){"unload"===n&&u.once.removeSafely(a,r,i)}}}(dBlazy,Drupal,this.document);
